# DengFeng Robotic Competition Simulation Platform


## 基本

- 各个和运动&“HP/s”相关的数值，均按照30Hz处理
    - 内部逻辑使用浮点数记录HP
- 为限制比赛时间，比赛开始1min后，双方开始持续受到1 HP/s的伤害；2min后受到2 HP/s的伤害；3min后受到3HP/s的伤害，以此类推。此伤害数值可以被“减伤”降低，保留小数。
- 任何一方HP<=0，游戏结束；结束时，HP>0的队伍胜利。若在比赛结束的瞬间，双方血量均为0，则判定为平局。

## 场地

- 道具
    - 角色的xy坐标和可获取的道具小于一定距离，则立即生效；若在判定时多名角色都在判定范围内，则都生效；消耗后道具消失，指定时间后在固定位置刷新。
    - 道具种类
        - 速度buff：我方速度状态变为加速，持续10s；地图中上产生，5s开始产生，消耗后20s刷新；
        - 防御buff：我方防御状态变为减伤，持续10s；地图中下产生，5s开始产生，消耗后20s刷新；
        - HP包：血量40HP；地图左上右下产生，5s开始产生，消耗后30s刷新；只有一方可以获得此道具。
        - MP包：技能40MP；地图坐下右上产生，5s开始产生，消耗后30s刷新；只有一方可以获得此道具。
- 障碍物和命中判定
    - 障碍物位置固定，形状圆形
- 出界警告区
    - 边界附近有出界警告，进入此区域会持续扣血5HP/s

## 小车

- 参数
    - 基本：血量HP，技能MP，弹夹MAG
        - 血量 0~100HP
        - 技能 0~100MP；自动回复2MP/s
        - 弹夹 0~12MAG；换弹时间2s
    - 特殊：
        - 速度状态SPD：减速0.5/常速1.0/加速1.5
            - 会改变可接受的电机控制信号上限
        - 防御状态DEF：普通1.0/减伤0.5
            - 受到的伤害降低一半，向下取整
        - 攻击状态ATK：普通/冷却中/换弹中
    - 坐标：位置xy，朝向θ，视野和攻击方向φ（相对于θ的方向记做φ，绝对方向记做φr）。
    - 初始 100HP / 100MP / 12MAG，坐标固定地图左边缘中或右边缘中，面向地图中心
- 行动
    - 双电机控制电压信号（Ul，Ur）。影响小车的xyθ坐标。
        - Ul，Ur 受到速度状态的限制
        - (Ul-Ur)决定了Δθ，(Ul+Ur)决定了Δx和Δy
    - 舵机控制信号（设置转动目标角度φ2）。
        - 由于φ的移动有速度限制90deg/s，所以下一回合未必是指定的φ2
        - 注意，φr是由φ和θ两个参数决定的；所以“加速”意味着更大的Δθ，即更强的瞄准能力，“减速”意味着行动和瞄准能力都有所下降；

- 视野
    - 一个夹角的范围内（45°）可见的
        - 敌人及全部状态
        - 道具
- 主动技能
    - 换弹夹
        - 持续时间2s，其间不能攻击/延缓射线
    - 攻击
        - 命中判定：由φr和场地判断命中，由敌方姿态θ判断具体伤害
            - 距离越远，命中率越低；到L时衰减为0；
        - 三挡伤害；冷却均为0.5s；冷却或换弹时不能攻击；
            - 弹药 -- 正面  -- 侧面 -- 后面
            - 1MAG -- 5HP  -- 6HP  -- 7HP
            - 2MAG -- 12HP -- 14HP -- 16HP
            - 3MAG -- 21HP -- 24HP -- 27HP
    - 延缓射线
        - 命中判定：由φr和场地判断命中
        - 效果：敌方速度状态SPD变为减速，持续10s
        - 消耗30MP；冷却：10s
        - 不消耗MAG，但是和普通攻击共用0.5s的冷却判定，且换弹时不能发动
    - 加速
        - 直接生效
        - 效果：我方速度状态SPD变为加速，持续10s
        - 消耗60MP；冷却：20s
    - 能量护罩
        - 直接生效
        - 效果：我方防御状态DEF变为减伤，持续10s
        - 消耗60MP；冷却：20s

